<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--这里的namespace还没有确定-->

<mapper namespace="com.ezd.dao.EzdEnretDao">
    <resultMap id="enret" type="com.ezd.model.EzdEnret"><!--招聘信息表mapper-->
        <id column="enret_id" property="enretId" /><!--编号-->
        <result column="enret_wantNum" property="enretWantNum"/><!--招聘人数-->
        <result column="enret_creTime" property="enretCreTime"/><!--发布时间-->
        <result column="enret_lwMoney" property="enretLwMoney"/><!--最低工资-->
        <result column="enret_hgMoney" property="enretHgMoney"/><!--最高工资-->
        <result column="enret_pg" property="enretPg"/><!--待遇-->
        <result column="enret_demand" property="enretDemand"/><!--招聘要求-->
        <association property="ezdPostOne" resultMap="com.ezd.dao.EzdPostOneDao.postOne" /><!-- 一级招聘岗位 -->
        <association property="ezdPostTwo" resultMap="com.ezd.dao.EzdPostTwoDao.postTwo" /><!-- 二级招聘岗位 -->
        <association property="nretEnmg" resultMap="com.ezd.dao.EzdEnmgDao.enmg"/><!--发布信息的公司-->
        <association property="enretStatus" resultMap="com.ezd.dao.EzdNewsStatusDao.newsStatus" /><!--该招聘信息的状态-->
        <association property="enretType" resultMap="com.ezd.dao.EzdRetTypeDao.retType" /><!--招聘类型-->
        <collection property="ezdErlenrets" resultMap="com.ezd.dao.EzdErlenretDao.erlenret"/><!--对应的报名信息表-->
        <collection property="ezdUmgs" resultMap="com.ezd.dao.EzdUmgDao.umg"/><!--对应的浏览人列表-->

    </resultMap>

    <!--查询全部的信息-->
    <select id="getAll">
        select * from ezd_enret
    </select>
    <!--通过一个企业的编号获取信息-->
    <select id="getOne" parameterType="int ">
        SELECT * from ezd_enret
        where nret_enmg = #{_parameter}
    </select>
    <!--发布一条招聘信息-->
    <insert id="add" parameterType="com.ezd.model.EzdEnret" >
        insert into
        ezd_enret(	nret_enmg ,
                    enret_wantNum ,
                    enret_type ,
                    enret_creTime ,
                    enret_lwMoney ,
                    enret_hgMoney ,
                    enret_postOne ,
                    enret_postTwo  ,
                    enret_pg ,
                    enret_demand ,
                    enret_status,)
        values (#{nretEnmg},
                #{enretWantNum},
                #{enretType.retTypeId},
                #{enretCreTime},
                #{enretLwMoney},
                #{enretHgMoney},
                #{ezdPostOne.poneId},
                #{ezdPostTwo.ptwoId},
                #{enretPg},
                #{enretDemand},
                #{enretStatus.newsStatusId})
    </insert>
    <!--修改指定的招聘信息的状态-->
    <update id="updateStatus" parameterType="com.ezd.model.EzdEnret">
        UPDATE ezd_enret
        set enret_status =  #{enretStatus.newsStatusId}
        where enret_id = #{enretId}
    </update>
</mapper>